<svg viewBox="0 0 1400 550" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: bold 22px sans-serif; fill: #1a1a1a; }
      .subtitle { font: bold 14px sans-serif; fill: #555; }
      .section-title { font: bold 13px sans-serif; fill: #2c3e50; }
      .text { font: 11px sans-serif; fill: #2c3e50; }
      .small-text { font: 10px sans-serif; fill: #5a6c7d; }
      .code { font: 10px monospace; fill: #e74c3c; }
      .number { font: bold 14px sans-serif; fill: #fff; }

      .user-box { fill: #3498db; stroke: #2980b9; stroke-width: 2; }
      .component-box { fill: #ecf0f1; stroke: #3498db; stroke-width: 2; }
      .action-box { fill: #9b59b6; stroke: #8e44ad; stroke-width: 2; }
      .state-box { fill: #f39c12; stroke: #d68910; stroke-width: 2; }
      .service-box { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; }
      .ml-box { fill: #27ae60; stroke: #1e8449; stroke-width: 2; }
      .output-box { fill: #1abc9c; stroke: #16a085; stroke-width: 2; }

      .arrow { fill: none; stroke: #34495e; stroke-width: 2; marker-end: url(#arrowhead); }
      .arrow-blue { fill: none; stroke: #3498db; stroke-width: 2; marker-end: url(#arrowhead-blue); }
      .arrow-purple { fill: none; stroke: #9b59b6; stroke-width: 2; marker-end: url(#arrowhead-purple); }
      .arrow-orange { fill: none; stroke: #f39c12; stroke-width: 2; marker-end: url(#arrowhead-orange); }
      .arrow-green { fill: none; stroke: #27ae60; stroke-width: 2; marker-end: url(#arrowhead-green); }
      .arrow-red { fill: none; stroke: #e74c3c; stroke-width: 2; marker-end: url(#arrowhead-red); }
      .arrow-dashed { stroke-dasharray: 5,3; }
    </style>

    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#34495e" />
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#3498db" />
    </marker>
    <marker id="arrowhead-purple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#9b59b6" />
    </marker>
    <marker id="arrowhead-orange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#f39c12" />
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#27ae60" />
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#e74c3c" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="700" y="30" text-anchor="middle" class="title">Data Flow: Signed Language to Spoken Language</text>
  <text x="700" y="50" text-anchor="middle" class="small-text">Video input from camera/upload → ML processing → Text output with speech</text>

  <!-- Main Flow Container -->
  <rect x="30" y="70" width="1340" height="320" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1" rx="10"/>

  <!-- Step 1: User Input -->
  <circle cx="100" cy="150" r="20" class="user-box"/>
  <text x="100" y="155" text-anchor="middle" class="number">1</text>
  <rect x="50" y="180" width="100" height="60" class="user-box" rx="5"/>
  <text x="100" y="200" text-anchor="middle" class="text" fill="#fff">User</text>
  <text x="100" y="215" text-anchor="middle" class="small-text" fill="#fff">Signs to camera</text>
  <text x="100" y="228" text-anchor="middle" class="small-text" fill="#fff">or uploads video</text>

  <!-- Step 2: Video Component -->
  <circle cx="250" cy="150" r="20" class="component-box" stroke="#3498db"/>
  <text x="250" y="155" text-anchor="middle" class="number" fill="#3498db">2</text>
  <rect x="175" y="180" width="150" height="80" class="component-box" rx="5"/>
  <text x="250" y="200" text-anchor="middle" class="section-title">VideoComponent</text>
  <text x="250" y="218" text-anchor="middle" class="code">video.component.ts</text>
  <text x="250" y="235" text-anchor="middle" class="small-text">MediaStream capture</text>
  <text x="250" y="250" text-anchor="middle" class="small-text">or file upload</text>

  <!-- Step 3: ML Processing -->
  <circle cx="420" cy="150" r="20" class="ml-box"/>
  <text x="420" y="155" text-anchor="middle" class="number">3</text>
  <rect x="345" y="180" width="150" height="100" class="ml-box" rx="5"/>
  <text x="420" y="200" text-anchor="middle" class="text" fill="#fff">ML Models</text>
  <text x="420" y="218" text-anchor="middle" class="small-text" fill="#fff">MediaPipe Holistic</text>
  <text x="420" y="233" text-anchor="middle" class="small-text" fill="#fff">33 pose landmarks</text>
  <text x="420" y="248" text-anchor="middle" class="small-text" fill="#fff">468 face landmarks</text>
  <text x="420" y="263" text-anchor="middle" class="small-text" fill="#fff">42 hand landmarks</text>
  <text x="420" y="278" text-anchor="middle" class="small-text" fill="#fff">(Web Worker)</text>

  <!-- Step 4: Pose State -->
  <circle cx="590" cy="150" r="20" class="state-box"/>
  <text x="590" y="155" text-anchor="middle" class="number">4</text>
  <rect x="515" y="180" width="150" height="80" class="state-box" rx="5"/>
  <text x="590" y="200" text-anchor="middle" class="text" fill="#fff">NGXS State</text>
  <text x="590" y="218" text-anchor="middle" class="small-text" fill="#fff">PoseState</text>
  <text x="590" y="235" text-anchor="middle" class="small-text" fill="#fff">EstimatedPose</text>
  <text x="590" y="250" text-anchor="middle" class="small-text" fill="#fff">543 total landmarks</text>

  <!-- Step 5: SignWriting Service -->
  <circle cx="760" cy="150" r="20" class="service-box"/>
  <text x="760" y="155" text-anchor="middle" class="number">5</text>
  <rect x="685" y="180" width="150" height="80" class="service-box" rx="5"/>
  <text x="760" y="200" text-anchor="middle" class="text" fill="#fff">SignWritingService</text>
  <text x="760" y="218" text-anchor="middle" class="small-text" fill="#fff">Pose → FSW notation</text>
  <text x="760" y="235" text-anchor="middle" class="small-text" fill="#fff">Body/Face/Hands</text>
  <text x="760" y="250" text-anchor="middle" class="small-text" fill="#fff">components</text>

  <!-- Step 6: Translation -->
  <circle cx="930" cy="150" r="20" class="service-box"/>
  <text x="930" y="155" text-anchor="middle" class="number">6</text>
  <rect x="855" y="180" width="150" height="80" class="service-box" rx="5"/>
  <text x="930" y="200" text-anchor="middle" class="text" fill="#fff">Translation</text>
  <text x="930" y="218" text-anchor="middle" class="small-text" fill="#fff">SignWriting → Text</text>
  <text x="930" y="235" text-anchor="middle" class="small-text" fill="#fff">BrowserMT</text>
  <text x="930" y="250" text-anchor="middle" class="small-text" fill="#fff">(Web Worker)</text>

  <!-- Step 7: Output State -->
  <circle cx="1100" cy="150" r="20" class="state-box"/>
  <text x="1100" y="155" text-anchor="middle" class="number">7</text>
  <rect x="1025" y="180" width="150" height="80" class="state-box" rx="5"/>
  <text x="1100" y="200" text-anchor="middle" class="text" fill="#fff">TranslateState</text>
  <text x="1100" y="218" text-anchor="middle" class="small-text" fill="#fff">spokenLanguageText</text>
  <text x="1100" y="235" text-anchor="middle" class="small-text" fill="#fff">signWriting: FSW[]</text>
  <text x="1100" y="250" text-anchor="middle" class="small-text" fill="#fff">detectedLanguage</text>

  <!-- Step 8: UI Output -->
  <circle cx="1270" cy="150" r="20" class="output-box"/>
  <text x="1270" y="155" text-anchor="middle" class="number">8</text>
  <rect x="1195" y="180" width="150" height="80" class="output-box" rx="5"/>
  <text x="1270" y="200" text-anchor="middle" class="text" fill="#fff">UI Output</text>
  <text x="1270" y="218" text-anchor="middle" class="small-text" fill="#fff">SignedToSpoken</text>
  <text x="1270" y="235" text-anchor="middle" class="small-text" fill="#fff">Text display</text>
  <text x="1270" y="250" text-anchor="middle" class="small-text" fill="#fff">+ TextToSpeech</text>

  <!-- Arrows -->
  <path d="M 150 210 L 170 210" class="arrow-blue"/>
  <path d="M 325 220 L 340 220" class="arrow-green"/>
  <path d="M 495 220 L 510 220" class="arrow-orange"/>
  <path d="M 665 220 L 680 220" class="arrow-red"/>
  <path d="M 835 220 L 850 220" class="arrow-red"/>
  <path d="M 1005 220 L 1020 220" class="arrow-orange"/>
  <path d="M 1175 220 L 1190 220" class="arrow"/>

  <!-- Data labels on arrows -->
  <text x="160" y="200" class="small-text">video</text>
  <text x="160" y="212" class="small-text">frames</text>
  <text x="330" y="210" class="small-text">pose</text>
  <text x="500" y="210" class="small-text">landmarks</text>
  <text x="670" y="210" class="small-text">FSW</text>
  <text x="840" y="210" class="small-text">text</text>
  <text x="1010" y="210" class="small-text">state</text>
  <text x="1180" y="210" class="small-text">render</text>

  <!-- Observable subscription (reactive loop) -->
  <path d="M 1100 265 L 1100 310 L 250 310 L 250 265" class="arrow-orange arrow-dashed"/>
  <text x="675" y="328" text-anchor="middle" class="small-text">Observable subscription - UI re-renders when state changes</text>

  <!-- Component Files -->
  <rect x="30" y="400" width="1340" height="80" fill="#fff" stroke="#dee2e6" stroke-width="1" rx="5"/>
  <text x="50" y="425" class="section-title">Key Files:</text>
  <text x="50" y="445" class="code">video.component.ts</text>
  <text x="50" y="460" class="small-text">Camera/upload input</text>

  <text x="220" y="445" class="code">holistic.service.ts</text>
  <text x="220" y="460" class="small-text">MediaPipe ML</text>

  <text x="390" y="445" class="code">pose.state.ts</text>
  <text x="390" y="460" class="small-text">Pose landmarks</text>

  <text x="540" y="445" class="code">sign-writing.service.ts</text>
  <text x="540" y="460" class="small-text">FSW rendering</text>

  <text x="730" y="445" class="code">translate.service.ts</text>
  <text x="730" y="460" class="small-text">Translation logic</text>

  <text x="910" y="445" class="code">translate.state.ts</text>
  <text x="910" y="460" class="small-text">App state</text>

  <text x="1090" y="445" class="code">signed-to-spoken.component.ts</text>
  <text x="1090" y="460" class="small-text">Output UI</text>

  <!-- Legend -->
  <rect x="30" y="490" width="1340" height="50" fill="#fff" stroke="#dee2e6" stroke-width="1" rx="5"/>
  <text x="50" y="520" class="text">Legend:</text>

  <rect x="120" y="505" width="18" height="18" class="user-box" rx="3"/>
  <text x="145" y="518" class="small-text">User</text>

  <rect x="200" y="505" width="18" height="18" class="component-box" rx="3"/>
  <text x="225" y="518" class="small-text">Component</text>

  <rect x="310" y="505" width="18" height="18" class="ml-box" rx="3"/>
  <text x="335" y="518" class="small-text">ML Model</text>

  <rect x="410" y="505" width="18" height="18" class="state-box" rx="3"/>
  <text x="435" y="518" class="small-text">NGXS State</text>

  <rect x="520" y="505" width="18" height="18" class="service-box" rx="3"/>
  <text x="545" y="518" class="small-text">Service</text>

  <rect x="610" y="505" width="18" height="18" class="output-box" rx="3"/>
  <text x="635" y="518" class="small-text">Output</text>

  <path d="M 700 514 L 750 514" class="arrow-orange arrow-dashed"/>
  <text x="760" y="518" class="small-text">Reactive subscription</text>

  <text x="920" y="518" class="small-text">All processing runs client-side in browser (no server)</text>
</svg>
